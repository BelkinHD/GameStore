{% extends 'core/base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}

<br><br><br>
{% if boleta %} 
    <div class="row">
        <h1 style="text-align: center">Detalle de boleta NÂ°{{ boleta.nro_boleta }}</h1>
        <div class="col-6">
            <h3>Usuario: {{ boleta.cliente.usuario.first_name }} {{ boleta.cliente.usuario.last_name }}</h3>
        </div>
        <div class="col-6">
            <table class="mb-3" style="float: right">
                <tr>
                    <td class="td_img_estado_boleta"> 
                        <img src="{% static 'core/img/vendido.png' %}" style="width: 75px;">
                    </td>
                    <td class="td_img_estado_boleta"> 
                        <img src="{% static 'core/img/despachado.png' %}" style="width: 75px;">
                    </td>
                    <td class="td_img_estado_boleta"> 
                        <img src="{% static 'core/img/entregado.png' %}" style="width: 75px;">
                    </td>
                </tr>
                <tr>
                    <td class="td_fec_estado_boleta"> 
                        Vendido <br> 
                        {{ boleta.fecha_venta|formatear_fecha }}
                    </td>
                    <td class="td_fec_estado_boleta"> 
                        Despachado <br> 
                        {{ boleta.fecha_despacho|formatear_fecha }}
                    </td>
                    <td class="td_fec_estado_boleta"> 
                        Entregado <br> 
                        {{ boleta.fecha_entrega|formatear_fecha }}
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <table class="table table-bordered mt-3">
        <thead>
            <tr>            
                <th scope="col">Categoria</th>  
                <th scope="col">Producto</th> 
                <th scope="col">Precio</th>   
                <th scope="col">%Subscriptor</th>
                <th scope="col">Oferta</th>
                <th scope="col">%Desc.Total</th>
                <th scope="col">Descuentos</th>
                <th scope="col">Precio a pagar</th>
            </tr>
        </thead>
        <tbody>
            {% for detalle in boleta.detalleboleta_set.all %}
            <tr>
                <td>{{ detalle.bodega.producto.categoria.nombre }}</td>
                <td>{{ detalle.bodega.producto.nombre }}</td>
                <td>{{ detalle.precio|formatear_dinero }}</td>
                <td>{{ detalle.descuento_subscriptor|formatear_porcentaje }}</td>
                <td>{{ detalle.descuento_oferta|formatear_porcentaje}}</td>
                <td>{{ detalle.descuento_total|formatear_porcentaje }}</td>
                <td>{{ detalle.descuentos|formatear_dinero }}</td>
                <td>{{ detalle.precio_a_pagar|formatear_dinero }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div style="text-align: right;">
        <label style="padding-right: 10px;">Precio sin IVA</label>
        <input type="text" value="{{ boleta.monto_sin_iva|formatear_dinero }}" readonly style="width: 150px;" class="margen"> <br>
        <label style="padding-right: 10px;">Valor del IVA (19%)</label>
        <input type="text" value="{{ boleta.iva|formatear_dinero }}" readonly style="width: 150px;" class="margen"> <br>
        <label style="padding-right: 10px;">Total a pagar</label>
        <input type="text" value="{{ boleta.total_a_pagar|formatear_dinero }}" readonly style="width: 150px;" class="margen"> <br>
    </div>
    <br>
    <div style="text-align: right;" class="botones-compra">
        <button type="reset" class="btn btn-primary">Cancelar compra</button>
        <button type="submit" class="btn btn-primary">Pagar</button>
    </div>
{% else %}
    <h1>No se puede mostrar la boleta</h1>
{% endif %}
    
<br><br><br>

{% endblock content %}